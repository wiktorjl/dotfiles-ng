#!/bin/bash

echo "-----------------------------------------------------"
echo "Attempting to install Burp Suite..."
echo "-----------------------------------------------------"

# Download the latest version of Burp Suite
mkdir -p $HOME/apps
curl -L -o /home/$USER/apps/burpsuite.jar  https://portswigger-cdn.net/burp/releases/download?product=community&version=2025.5&type=Jar

echo "Burp Suite downloaded to /home/$USER/apps/burpsuite.jar"

cat <<EOF > $HOME/apps/burpsuite.sh
#!/bin/bash
java -jar $HOME/apps/burpsuite.jar "\$@"
EOF

chmod +x /home/$USER/apps/burpsuite.sh

# Create a desktop entry for Burp Suite
cat <<EOF > /home/$USER/.local/share/applications/burpsuite.desktop
[Desktop Entry]
Version=1.0
Type=Application
Name=Burp Suite
Comment=Burp Suite Community Edition
Exec=java -jar /home/$USER/apps/burpsuite.jar
Icon=/home/$USER/.local/share/icons/burpsuite.png
Terminal=false
Categories=Development;Security;
StartupNotify=true
EOF

# Get some other goodies
rm -rf /tmp/burp.git
git clone https://aur.archlinux.org/burpsuite.git /tmp/burp.git
mkdir -p /home/$USER/.local/share/applications
mkdir -p /home/$USER/.local/share/icons
# cp -v /tmp/burp.git/burpsuite.desktop /home/$USER/.local/share/applications/burpsuite.desktop
cp -v /tmp/burp.git/icon64.png /home/$USER/.local/share/icons/burpsuite.png

echo "Burp Suite downloaded to /home/$USER/apps/burpsuite.jar"
